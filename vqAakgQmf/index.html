<html>
<head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Sqoopçš„å®‰è£…å’Œä½¿ç”¨ | å§¿åŠ¿ç¾å¦‚ç”»( *ãƒ»Ï‰ãƒ»)âœ„â•°ã²â•¯</title>
<meta name="description" content="å¤§çˆ·ä¸è¿›æ¥çœ‹çœ‹å—ï¼Ÿè¿™é‡Œæœ‰å¥½åº·çš„å“¦~~~" />
<link rel="shortcut icon" href="https://Yanoona.github.io/favicon.ico">
<link rel="stylesheet" href="https://Yanoona.github.io/styles/main.css">

<script src="https://Yanoona.github.io/media/js/jquery.min.js"></script>
<script src="https://Yanoona.github.io/media/js/masonry.pkgd.min.js"></script>
<script src="https://Yanoona.github.io/media/js/aos.js"></script>
<script src="https://Yanoona.github.io/media/js/pace.min.js"></script>
<script src="https://Yanoona.github.io/media/js/view-image.min.js"></script>
<script src="https://Yanoona.github.io/media/js/functions.js"></script>
    <script src="https://Yanoona.github.io/media/js/waterfall.min.js"></script>
    <script src="https://Yanoona.github.io/media/js/prism.min.js"></script>
</head>
<body>
<header id="header" class="grid-container">
    <!-- start: .menu-wrapper -->
    <div class="menu-mobile">
        <i class="fa fa-reorder"></i>
    </div>
    <div class="menu-wrapper">
        <div class="">
            <nav class="main-nav " >
                <ul id="menu-header" class="menu gradient-effect">
                    
                        <li class="">
                            <a href="https://Yanoona.github.io" class="menu">
                                é¦–é¡µ
                            </a>
                        </li>
                    
                        <li class="">
                            <a href="https://Yanoona.github.io/archives" class="menu">
                                å½’æ¡£
                            </a>
                        </li>
                    
                        <li class="">
                            <a href="https://Yanoona.github.io/tags" class="menu">
                                æ ‡ç­¾
                            </a>
                        </li>
                    
                        <li class="">
                            <a href="https://github.com/Yanoona" class="menu">
                                å…³äº
                            </a>
                        </li>
                    
                </ul>
            </nav>
            <!-- end: .main-nav -->
            <div class="clear"></div>
            <div class="border hide-on-tablet hide-on-mobile"></div>
        </div>
        <div class="clear"></div>
    </div>
    <!-- end: .menu-wrapper -->
    <div class="clear"></div>
</header>

<main id="single" class="main grid-container fullcover no-sidebar aos-init aos-animate" data-aos="fade">

    <div class="center content">
        <div class="featured-image cover"
             style="background-image: url('https://Yanoona.github.io/post-images/vqAakgQmf.jpg');">
            <div class="meta top">
                <time class="meta-info" style="float:left;" datetime="2020-02-19"><i
                            class="fa fa-calendar"></i><span
                            class="lately">11 åˆ†é’Ÿå‰</span></time>
            </div>
            <div class="info">
                <div class="tags ">
                    
                        <a href="https://Yanoona.github.io/bigData/" class="ctag ctag-0 ctag-bigData"
                           aria-label="">å¤§æ•°æ®</a>
                    
                        <a href="https://Yanoona.github.io/Sqoop/" class="ctag ctag-1 ctag-Sqoop"
                           aria-label="">Sqoop</a>
                    
                        <a href="https://Yanoona.github.io/Hive/" class="ctag ctag-2 ctag-Hive"
                           aria-label="">Hive</a>
                    
                        <a href="https://Yanoona.github.io/mysql/" class="ctag ctag-3 ctag-mysql"
                           aria-label="">mysql</a>
                    
                </div>
                <h1 class="title ularge white bold">Sqoopçš„å®‰è£…å’Œä½¿ç”¨</h1>
            </div>
        </div>
    </div>

    <div class="epcl-page-wrapper">
        <div class="left-content grid-70 np-mobile">
            <article class="main-article post">
                <section class="post-content">
                    <div class="text">
                        <h2 id="æ¦‚è¿°">ğŸ˜€æ¦‚è¿°</h2>
<ol>
<li>
<p>Sqoop æ˜¯ apache æ——ä¸‹ä¸€æ¬¾â€œHadoop å’Œå…³ç³»æ•°æ®åº“æœåŠ¡å™¨ä¹‹é—´ä¼ é€æ•°æ®â€çš„å·¥å…·ã€‚</p>
</li>
<li>
<p>æ ¸å¿ƒçš„åŠŸèƒ½æœ‰ä¸¤ä¸ªï¼šå¯¼å…¥ã€å¯¼å‡º</p>
</li>
<li>
<p>æœ¬æ–‡æ¡£ç”¨äºè®°å½• Sqoopçš„å®‰è£…å’Œä½¿ç”¨ã€‚</p>
</li>
</ol>
<blockquote>
<p>å»ºè®®ğŸ—£<code>å…ˆé…ç½®å¥½Hadoopçš„JobHistoryèŠ‚ç‚¹</code>ï¼Œä»¥ä¾¿äºåœ¨Webä¸­çš„Yarnç•Œé¢æŸ¥çœ‹MapReduceä»»åŠ¡æ—¥å¿—ä¿¡æ¯ã€‚</p>
</blockquote>
<h2 id="sqoopå®‰è£…">ğŸ˜ƒSqoopå®‰è£…</h2>
<h3 id="1å‰ææ¦‚è¿°">1.å‰ææ¦‚è¿°</h3>
<blockquote>
<ul>
<li><strong>Sqoopå°±æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œ åªéœ€è¦åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šè¿›è¡Œå®‰è£…å³å¯ã€‚</strong></li>
</ul>
<ul>
<li><strong>ä½ å®‰è£…çš„Sqoopè½¯ä»¶çš„èŠ‚ç‚¹ä¸€å®šè¦åŒ…å«ä½ è¦ä½¿ç”¨çš„é›†ç¾¤æˆ–è€…è½¯ä»¶ç³»ç»Ÿçš„å®‰è£…åŒ…</strong></li>
</ul>
</blockquote>
<h3 id="2-è½¯ä»¶ä¸‹è½½">2. è½¯ä»¶ä¸‹è½½</h3>
<p>ä¸‹è½½åœ°å€ï¼šâš¡ï¸<a href="http://mirrors.hust.edu.cn/apache/sqoop/">ç‚¹å‡»æ­¤å¤„æ‰“å¼€Sqoopä¸‹è½½é“¾æ¥</a>âš¡ï¸</p>
<blockquote>
<p>æ³¨æ„ğŸ‘‡ï¼š</p>
<ol>
<li>
<p>ä¸‹è½½<code>sqoop-xx.bin__xx.tar.gz</code>çš„å®‰è£…å‹ç¼©åŒ…ã€‚</p>
</li>
<li>
<p>Sqoop 1 å’ŒSqoop 2ä¸å…¼å®¹ï¼Œä¸”ç»å¤§éƒ¨åˆ†ä¼ä¸šæ‰€ä½¿ç”¨çš„Sqoopçš„ç‰ˆæœ¬æ˜¯ Sqoop 1ã€‚</p>
<p>â€‹	1.4.7ç‰ˆæœ¬çš„ä¸ºSqoop 1</p>
<p>â€‹	1.99.7ç‰ˆæœ¬çš„ä¸ºSqoop 2</p>
</li>
</ol>
</blockquote>
<h2 id="å®‰è£…">ğŸ˜„å®‰è£…</h2>
<h3 id="1åˆ›å»ºsqoopå®‰è£…ç›®å½•">1.åˆ›å»ºsqoopå®‰è£…ç›®å½•</h3>
<pre><code>mkdir /usr/local/sqoop
</code></pre>
<h3 id="2è§£å‹å®‰è£…åŒ…åˆ°æŒ‡å®šç›®å½•">2.è§£å‹å®‰è£…åŒ…åˆ°æŒ‡å®šç›®å½•</h3>
<p>ä¸Šä¼ â˜ï¸è§£å‹ç¼©å®‰è£…åŒ…åˆ°æŒ‡å®šç›®å½•ï¼ˆæ­¤å¤„è·³è¿‡äº†Ftpä¼ è¾“æ­¥éª¤ï¼‰ã€‚</p>
<p>å› ä¸ºä¹‹å‰hiveåªæ˜¯å®‰è£…åœ¨hadoop1æœºå™¨ä¸Šï¼Œæ‰€ä»¥æˆ‘è¿™é‡ŒSqoopä¹ŸåŒæ ·å®‰è£…åœ¨hadoop1æœºå™¨ä¸Šã€‚ğŸ‘‹</p>
<pre><code>tar -zxvf sqoop-1.4.7.bin__hadoop-2.6.0.tar.gz /usr/local/sqoop
</code></pre>
<h3 id="3ä¿®æ”¹é…ç½®æ–‡ä»¶">3.ä¿®æ”¹é…ç½®æ–‡ä»¶</h3>
<ol>
<li>
<p>è¿›å…¥åˆ° conf æ–‡ä»¶å¤¹ä¸­ï¼Œå¤åˆ¶sqoop-env-template.shï¼Œå¹¶å°†å…¶ä¿®æ”¹ä¸ºsqoop-env.sh</p>
<pre><code>cp sqoop-env-template.sh sqoop-env.sh
</code></pre>
</li>
<li>
<p>ä¿®æ”¹sqoop-env.sh</p>
<pre><code>vi sqoop-env.sh
</code></pre>
<pre><code>export HADOOP_MAPRED_HOME=/usr/local/hadoop/hadoop-2.9.2			#Hadoopçš„MapReduceå®‰è£…è·¯å¾„
export HADOOP_COMMON_HOME=/usr/local/hadoop/hadoop-2.9.2			#Hadoopçš„Commonå®‰è£…è·¯å¾„
export HIVE_HOME=/usr/local/hive/hive							  #Hiveå®‰è£…è·¯å¾„
</code></pre>
<p>ğŸ™„ä¸ºä»€ä¹ˆåœ¨sqoop-env.sh æ–‡ä»¶ä¸­ä¼šè¦æ±‚åˆ†åˆ«è¿›è¡Œ commonå’Œmapreduceçš„é…ç½®å‘¢ï¼Ÿï¼Ÿï¼Ÿ</p>
<blockquote>
<p>ğŸ™‹åœ¨apacheçš„hadoopçš„å®‰è£…ä¸­ï¼›å››å¤§ç»„ä»¶éƒ½æ˜¯å®‰è£…åœ¨åŒä¸€ä¸ªhadoop_homeä¸­çš„</p>
<p>ğŸ™‹â€â™‚ä½†æ˜¯åœ¨CDH, HDPä¸­ï¼Œ è¿™äº›ç»„ä»¶éƒ½æ˜¯å¯é€‰çš„ã€‚</p>
<p>ğŸ™‹åœ¨å®‰è£…hadoopçš„æ—¶å€™ï¼Œå¯ä»¥é€‰æ‹©æ€§çš„åªå®‰è£…HDFSæˆ–è€…YARNï¼Œ</p>
<p>ğŸ™‹â€â™‚CDH,HDPåœ¨å®‰è£…hadoopçš„æ—¶å€™ï¼Œä¼šæŠŠHDFSå’ŒMapReduceæœ‰å¯èƒ½åˆ†åˆ«å®‰è£…åœ¨ä¸åŒçš„åœ°æ–¹ã€‚</p>
</blockquote>
</li>
<li>
<p>å°†Mysqlé©±åŠ¨åŒ…æ”¾åˆ° lib æ–‡ä»¶å¤¹ä¸‹</p>
<pre><code>cp mysql-connector-java-5.1.48-bin.jar /usr/local/sqoop/sqoop-1.4.7/lib/
</code></pre>
</li>
<li>
<p>é…ç½®ç¯å¢ƒå˜é‡</p>
<pre><code>vi /etc/profile
</code></pre>
<pre><code>#åœ¨æœ«å°¾å¤„æ·»åŠ ä»¥ä¸‹è¡Œ
export SQOOP_HOME=/usr/local/sqoop/sqoop-1.4.7
export PATH=${PATH}:${SQOOP_HOME}/bin
</code></pre>
<pre><code>#ä½¿æ–‡ä»¶ç”Ÿæ•ˆ
source /etc/profile
</code></pre>
</li>
<li>
<p>éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸğŸ‘¨â€ğŸ”§</p>
<pre><code>sqoop version
</code></pre>
</li>
</ol>
<h2 id="sqoopçš„åŸºæœ¬å‘½ä»¤">ğŸ˜Sqoopçš„åŸºæœ¬å‘½ä»¤</h2>
<pre><code>#æŸ¥çœ‹å‘½ä»¤
sqoop help

#è¿è¡Œç»“æœï¼š
usage: sqoop COMMAND [ARGS]

Available commands:
							#ç”Ÿæˆä¸æ•°æ®åº“è®°å½•äº¤äº’çš„ä»£ç 
  codegen            Generate code to interact with database records
  							#å°†è¡¨å®šä¹‰å¯¼å…¥åˆ°Hiveä¸­
  create-hive-table  Import a table definition into Hive
  							#è®¡ç®—ä¸€ä¸ªSQLè¯­å¥å¹¶æ˜¾ç¤ºç»“æœï¼Œå¯ä»¥ç”¨æ¥æ ¡éªŒä¸‹importçš„æŸ¥è¯¢æ¡ä»¶æ˜¯å¦æ­£ç¡®ã€‚
  eval               Evaluate a SQL statement and display the results
  							#å°†HDFSç›®å½•å¯¼å‡ºåˆ°æ•°æ®åº“è¡¨
  export             Export an HDFS directory to a database table
  							#å¯ç”¨å‘½ä»¤åˆ—è¡¨
  help               List available commands
  							#å°†è¡¨ä»æ•°æ®åº“å¯¼å…¥åˆ°HDFS
  import             Import a table from a database to HDFS
  							#å°†æ‰€æœ‰è¡¨ä»æ•°æ®åº“å¯¼å…¥åˆ°HDFS
  import-all-tables  Import tables from a database to HDFS
  							#ä»å¤§å‹æœºæœåŠ¡å™¨å¯¼å…¥æ•°æ®é›†åˆ°HDFS
  import-mainframe   Import datasets from a mainframe server to HDFS
  							#å°†Importä»»åŠ¡ä¿å­˜ä¸ºjobï¼Œå¯ä»¥ç†è§£ä¸ºèµ·äº†ä¸ªåˆ«åï¼Œè¿™æ ·æ–¹ä¾¿çš„Sqoopä»»åŠ¡çš„ç®¡ç†ã€‚
  job                Work with saved jobs
  							#åˆ—å‡ºæœåŠ¡å™¨ä¸Šå¯ç”¨çš„æ•°æ®åº“
  list-databases     List available databases on a server
  							#åˆ—å‡ºæ•°æ®åº“ä¸Šå¯ç”¨çš„bè¡¨
  list-tables        List available tables in a database
  							#å¢é‡å¯¼å…¥çš„åˆå¹¶ç»“æœ
  merge              Merge results of incremental imports
  							#è¿è¡Œä¸€ä¸ªç‹¬ç«‹çš„Sqoop metastore
  metastore          Run a standalone Sqoop metastore
  							#æ˜¾ç¤ºsqoopçš„ç‰ˆæœ¬
  version            Display version information

See 'sqoop help COMMAND' for information on a specific command.

</code></pre>
<h2 id="sqoopçš„åŸºæœ¬ä½¿ç”¨">ğŸ˜†Sqoopçš„åŸºæœ¬ä½¿ç”¨</h2>
<blockquote>
<p><strong>æ‰§è¡ŒSqoopå‘½ä»¤æ—¶ï¼Œè¯·ç™»å½•å¯¹hadoopæœ‰æ“ä½œæƒé™çš„ç³»ç»Ÿç”¨æˆ·ğŸ¤´ï¼Œå¦åˆ™ä¼šæŠ¥æ²¡æœ‰æƒé™ç­‰é”™è¯¯ã€‚</strong></p>
<p>ä»¥ä¸‹å‘½ä»¤ä¸­å‡ºç°çš„<code>\</code>ä¸ºè¿æ¥ç¬¦ï¼Œè¿æ¥ä¸‹ä¸€å¥å‘½ä»¤ï¼Œåœ¨å®é™…æ“ä½œä¸­ä¹Ÿå¯ä½¿ç”¨ã€‚</p>
</blockquote>
<hr>
<h4 id="åˆ—å‡ºmysqlä¸­æœ‰å“ªäº›æ•°æ®åº“">åˆ—å‡ºMysqlä¸­æœ‰å“ªäº›æ•°æ®åº“</h4>
<pre><code>sqoop list-databases \
-connect jdbc:mysql://localhost:3306/ \
-username root \
-password root
</code></pre>
<hr>
<h4 id="åˆ—å‡ºmysqlä¸­æŒ‡å®šæ•°æ®åº“çš„è¡¨">åˆ—å‡ºMysqlä¸­æŒ‡å®šæ•°æ®åº“çš„è¡¨</h4>
<pre><code>sqoop list-tables \
-connect jdbc:mysql://localhost:3306/sqoop_test \
-username root \
-password root
</code></pre>
<hr>
<h4 id="åˆ›å»ºä¸€å¼ è·Ÿsqoop_teståº“ä¸­userè¡¨ç»“æ„ä¸€æ ·çš„hiveè¡¨hive_user">åˆ›å»ºä¸€å¼ è·Ÿsqoop_teståº“ä¸­userè¡¨ç»“æ„ä¸€æ ·çš„hiveè¡¨hive_user</h4>
<blockquote>
<p>æ­¤å¤„éœ€è¦å°† hive ä¸­çš„<code>hive-common-2.3.6.jar</code>åŒ…å¤åˆ¶åˆ° sqoop çš„ lib æ–‡ä»¶å¤¹ä¸‹ï¼Œå¦åˆ™ä¼šæŠ¥ <code>java.lang.ClassNotFoundException: org.apache.hadoop.hive.conf.HiveConf</code></p>
</blockquote>
<pre><code>sqoop create-hive-table \
-connect jdbc:mysql://localhost:3306/sqoop_test \
-username root \
-password root \
-table user \
-hive-table hive_user					#è¦åˆ›å»ºçš„hiveè¡¨å
</code></pre>
<p>åˆ›å»ºå®Œåå¯ç™»å½•hiveæŸ¥çœ‹ï¼Œä»¥ä¸‹ä¸ºæ‰€æ‰§è¡Œçš„å‘½ä»¤ï¼š</p>
<pre><code>hive												#ç™»å½•Hive
show databases;								#æŸ¥çœ‹æ•°æ®åº“
use default;									#é€‰æ‹©æ•°æ®åº“,ç”±äºä¸Šé¢æ²¡æœ‰æŒ‡å®šæ•°æ®åº“ï¼Œæ‰€ä»¥åœ¨é»˜è®¤æ•°æ®åº“ä¸­åˆ›å»ºäº†è¡¨
show tables;									#åˆ—å‡ºDefaultæ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨
</code></pre>
<hr>
<h4 id="mysqlhdfsä»mysqlå¯¼å…¥åˆ°hdfs">Mysqlâ†’HDFSï¼šä»Mysqlå¯¼å…¥åˆ°HDFS</h4>
<pre><code>sqoop import \
-connect jdbc:mysql://{æ•°æ®åº“IP}:3306/{æ•°æ®åº“}?autoReconnect=true \		  #æ•°æ®åº“è¿æ¥
-driver com.mysql.jdbc.Driver	\														#æ•°æ®åº“é©±åŠ¨
-username root	\																			#æ•°æ®åº“ç”¨æˆ·å
-password root	\																			#æ•°æ®åº“å¯†ç 
-table user	\																				#æ•°æ®åº“è¡¨
-target-dir	/user/admin/temp/sqoop-import	\										#å¯¼å…¥åˆ°HDFSçš„ç›®æ ‡ç›®å½•
-fields-terminated-by ','	\															#æŒ‰ä»€ä¹ˆåˆ†éš”
-m 1																							#MapReduceæ‰§è¡Œä»»åŠ¡æ•°
</code></pre>
<p>æ‹“å±•å‘½ä»¤ï¼ˆåœ¨å¯¼å‡ºä¸­åŒæ ·é€‚ç”¨ï¼‰ï¼š</p>
<pre><code>-where &quot;name = 'ZhangSan'&quot;																#å¸¦Whereæ¡ä»¶å¯¼å…¥
-columns &quot;name&quot; 																			#å¯¼å…¥æŒ‡å®šåˆ—
#è‡ªå®šä¹‰SqlæŸ¥è¯¢ï¼Œå¯¼å…¥æŸ¥è¯¢åæ•°æ®
-query 'select * from mysql.help_keyword where $CONDITIONS and name = &quot;STRING&quot;' 				
-split-by â€˜idâ€™																				#ä¸»é”®
-incremental  append  																	#å¢é‡å¯¼å…¥
</code></pre>
<blockquote>
<p>åœ¨éœ€è¦æŒ‰ç…§è‡ªå®šä¹‰SQLè¯­å¥å¯¼å‡ºæ•°æ®åˆ°HDFSçš„æƒ…å†µä¸‹ğŸ‘‡ğŸ‘‡ï¼š</p>
<ul>
<li>å¼•å·é—®é¢˜ï¼Œè¦ä¹ˆå¤–å±‚ä½¿ç”¨å•å¼•å·ï¼Œå†…å±‚ä½¿ç”¨åŒå¼•å·ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mi>O</mi><mi>N</mi><mi>D</mi><mi>I</mi><mi>T</mi><mi>I</mi><mi>O</mi><mi>N</mi><mi>S</mi><mi mathvariant="normal">çš„</mi></mrow><annotation encoding="application/x-tex">CONDITIONSçš„</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord cjk_fallback">çš„</span></span></span></span>ç¬¦å·ä¸ç”¨è½¬ä¹‰ï¼Œ è¦ä¹ˆå¤–å±‚ä½¿ç”¨åŒå¼•å·ï¼Œé‚£ä¹ˆå†…å±‚ä½¿ç”¨å•å¼•å·ï¼Œç„¶å<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mi>O</mi><mi>N</mi><mi>D</mi><mi>I</mi><mi>T</mi><mi>I</mi><mi>O</mi><mi>N</mi><mi>S</mi><mi mathvariant="normal">çš„</mi></mrow><annotation encoding="application/x-tex">CONDITIONSçš„</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord cjk_fallback">çš„</span></span></span></span>ç¬¦å·éœ€è¦è½¬ä¹‰ã€‚</li>
<li>è‡ªå®šä¹‰çš„SQLè¯­å¥ä¸­å¿…é¡»å¸¦æœ‰WHERE $CONDITIONS</li>
</ul>
</blockquote>
<hr>
<h4 id="hdfsmysqlä»hdfsä¸­å¯¼å‡ºåˆ°mysql">HDFSâ†’Mysqlï¼šä»HDFSä¸­å¯¼å‡ºåˆ°Mysql</h4>
<pre><code>sqoop export \
-connect jdbc:mysql://{æ•°æ®åº“IP}:3306/{æ•°æ®åº“}?autoReconnect=true \			 #æ•°æ®åº“è¿æ¥
-driver com.mysql.jdbc.Driver	\															#æ•°æ®åº“é©±åŠ¨
-username root	\																				#æ•°æ®åº“ç”¨æˆ·å
-password root	\																				#æ•°æ®åº“å¯†ç 
-table sqoop_test	\																			#æ•°æ®åº“è¡¨
-export-dir	/user/admin/temp/sqoop-import	\											#å¯¼å‡ºHDFSçš„ç›®æ ‡ç›®å½•åˆ°Mysql
-fields-terminated-by ','	\																#æŒ‰ä»€ä¹ˆåˆ†éš”
-split-by id	\																				#ä¸»é”®
-m 1																								#MapReduceæ‰§è¡Œä»»åŠ¡æ•°
</code></pre>
<blockquote>
<p>ğŸ‘¨â€ğŸ«è®°å½•é—®é¢˜ğŸ‘©â€ğŸ«ï¼š</p>
<ul>
<li>è‹¥â­ï¸æ•°æ®åº“è¿æ¥æˆ–å¯†ç å¸¦ä¸Šäº† <code>$</code> ç¬¦å·â­ï¸ï¼Œåˆ™ä¼šå¯¼è‡´åé¢è¯­æ³•æŠ¥<strong>æœªæ‰¾åˆ°å‘½ä»¤é”™è¯¯</strong>ï¼›</li>
<li>æœ‰æ—¶éœ€å¸¦ä¸Š <code>-driver</code>å‘½ä»¤ï¼Œå¦åˆ™<strong>æœ‰å¯èƒ½ä¼š</strong>å¯¼è‡´å‡ºç°æ•°æ®åº“è¿æ¥å¤±è´¥é”™è¯¯ï¼›</li>
<li>å¦‚æœMysqlä¸º8.0çš„ç‰ˆæœ¬ï¼Œéœ€è¦æ›´æ”¹ä¸º8.0é©±åŠ¨åŒ…ï¼š<code>com.mysql.cj.jdbc.Driver</code></li>
<li>æ‰§è¡Œå‘½ä»¤æ—¶å¿…é¡»å¸¦ä¸Š<code>-split-by</code>æˆ–è€…<code>-m 1</code>å‘½ä»¤ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼›</li>
<li><code>-fields-terminated-by</code>å‘½ä»¤è¡¨ç¤º <strong>æ•°æ®åº“ä¸­çš„åˆ—åœ¨å¯¼å…¥æ–‡æœ¬ä¸­æŒ‰ç…§ä»€ä¹ˆå­—ç¬¦åˆ†éš”</strong>ï¼Œå¦‚ä¸Šé¢ä¾‹å­ä¸­çš„ <strong>ï¼Œ</strong>;</li>
</ul>
</blockquote>
<hr>
<h4 id="mysqlhiveä»mysqlå¯¼å…¥åˆ°hiveä¸­">Mysqlâ†’Hiveï¼šä»Mysqlå¯¼å…¥åˆ°Hiveä¸­</h4>
<blockquote>
<p><strong>å¯¼å…¥è¿‡ç¨‹ï¼šå…ˆå¯¼å…¥åˆ° hdfsï¼Œç„¶åå† load è¿›å…¥ hiveğŸ˜Š</strong></p>
<p><strong>æ™®é€šå¯¼å…¥ï¼šæ•°æ®å­˜å‚¨åœ¨Hiveé»˜è®¤çš„defaultåº“ä¸­ï¼Œè¡¨åå°±æ˜¯å¯¹åº”çš„mysqlçš„è¡¨åï¼šğŸ˜œ</strong></p>
</blockquote>
<pre><code>sqoop import   \
--connect jdbc:mysql://localhost:3306/sqoop_test   \			#æ•°æ®åº“è¿æ¥
--username root  \														#æ•°æ®åº“ç”¨æˆ·å
--password root   \														#æ•°æ®åº“å¯†ç 
--table user   \															#æ•°æ®åº“è¡¨
--hive-import \															#å¯¼å…¥è·¯å¾„
-m 1																			#ä»»åŠ¡å¹¶å‘æ•°
</code></pre>
<p>æŸ¥çœ‹ Hive ä¸­çš„æ•°æ®</p>
<pre><code>hadoop fs -cat /user/hive/warehouse/user/part-m-00000			#userå°±æ˜¯è¡¨å
</code></pre>
<p>æ‹“å±•å‘½ä»¤ï¼š</p>
<pre><code>-fields-terminated-by &quot;ï¼Œ&quot;  									#æ•°æ®æŒ‰ä»€ä¹ˆåˆ†éš”
-lines-terminated-by &quot;\n&quot;  									#è¡Œæ•°æŒ‰ä»€ä¹ˆåˆ†éš”
-hive-overwrite 													#æŒ‡å®šè¦†ç›–å¯¼å…¥
-create-hive-table  												#æŒ‡å®šè‡ªåŠ¨åˆ›å»ºhiveè¡¨
-delete-target-dir 												#æŒ‡å®šåˆ é™¤ä¸­é—´ç»“æœæ•°æ®ç›®å½•
-hive-database  mydb_test 										#æŒ‡å®šHiveæ•°æ®åº“
-hive-table new_user												#æŒ‡å®šè¡¨å
-incremental  append  											#å¢é‡å¯¼å…¥
</code></pre>
<blockquote>
<p>å½“æŒ‡å®šHiveæ•°æ®åº“æ—¶ï¼Œå¿…é¡»å…ˆåˆ›å»ºè¯¥æ•°æ®åº“ï¼Œå¦åˆ™ä¼šæŠ¥<code>Database does not exist: xx</code>æ•°æ®åº“ä¸å­˜åœ¨ğŸŒˆã€‚</p>
<p>âš¡ï¸**ä»Hiveå¯¼å‡ºåˆ°Mysqlçš„æ­¥éª¤ å’Œ ä»HDFSå¯¼å‡ºåˆ°Mysqlçš„æ­¥éª¤ ä¸€è‡´ã€‚**âš¡ï¸</p>
</blockquote>

                    </div>
                    <div class="clear"></div>
                </section>
            </article>
            <div class="clear"></div>

            <section class="related section">
                
                
                    <article class="next grid-50 tablet-grid-50 grid-parent">
                        <div class="thumb cover lazy loaded"
                             style="background-image: url('https://Yanoona.github.io/post-images/NNC7-_gM_.jpg');"></div>
                        <a href="https://Yanoona.github.io/NNC7-_gM_/" class="full-link"></a>
                        <div class="info">
                            <time datetime="2020-02-19">2020-02-19</time>
                            <h4 class="title white no-margin">Hadoopåˆ°Mysqlçš„æ•°æ®ä¼ è¾“è®°å½•</h4>
                        </div>
                        <span class="epcl-button red">
                  <img src="https://Yanoona.github.io/media/images/right-arrow.svg" width="15" alt="Left Arrow">
                </span>
                        <div class="overlay"></div>
                    </article>
                

                <div class="clear"></div>
            </section>
        </div>
    </div>
</main>

    <footer id="footer" class="grid-container">
        <div class="widgets row gradient-effect">
            <div class="default-sidebar border-effect">
              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="tag_cloud-2" class="widget widget_epcl_posts_thumbs underline-effect">
                  <h4 class="widget-title title white bordered">æœ€æ–°æ–‡ç« </h4>
                  
                  
                  <article class="item post-0 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://Yanoona.github.io/vqAakgQmf/" class="thumb hover-effect">
                      <span class="fullimage cover" style="display: block;background-image: url('https://Yanoona.github.io/post-images/vqAakgQmf.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2020-02-19">2020-02-19</time>
                      <h4 class="title usmall">
                        <a href="https://Yanoona.github.io/vqAakgQmf/">Sqoopçš„å®‰è£…å’Œä½¿ç”¨</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  <article class="item post-1 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://Yanoona.github.io/NNC7-_gM_/" class="thumb hover-effect">
                      <span class="fullimage cover" style="display: block;background-image: url('https://Yanoona.github.io/post-images/NNC7-_gM_.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2020-02-19">2020-02-19</time>
                      <h4 class="title usmall">
                        <a href="https://Yanoona.github.io/NNC7-_gM_/">Hadoopåˆ°Mysqlçš„æ•°æ®ä¼ è¾“è®°å½•</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  <article class="item post-2 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://Yanoona.github.io/TeSMMvZK8/" class="thumb hover-effect">
                      <span class="fullimage cover" style="display: block;background-image: url('https://Yanoona.github.io/post-images/TeSMMvZK8.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2020-02-19">2020-02-19</time>
                      <h4 class="title usmall">
                        <a href="https://Yanoona.github.io/TeSMMvZK8/">CentOS 7å®‰è£…å’Œå¸è½½MySql</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  
                  <div class="clear"></div>
                </section>
              </div>

              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="tag_cloud-2" class="widget widget_tag_cloud underline-effect">
                  <h4 class="widget-title title white bordered">æ ‡ç­¾äº‘</h4>
                  <div class="tagcloud">
                    
                      <a href="https://Yanoona.github.io/bigData/" class="ctag ctag-0 ctag-bigData" aria-label="">å¤§æ•°æ®</a>
                    
                      <a href="https://Yanoona.github.io/Sqoop/" class="ctag ctag-1 ctag-Sqoop" aria-label="">Sqoop</a>
                    
                      <a href="https://Yanoona.github.io/Hive/" class="ctag ctag-2 ctag-Hive" aria-label="">Hive</a>
                    
                      <a href="https://Yanoona.github.io/mysql/" class="ctag ctag-3 ctag-mysql" aria-label="">mysql</a>
                    
                      <a href="https://Yanoona.github.io/Hadoop/" class="ctag ctag-4 ctag-Hadoop" aria-label="">Hadoop</a>
                    
                      <a href="https://Yanoona.github.io/j_dWapwnj/" class="ctag ctag-5 ctag-j_dWapwnj" aria-label="">CentOS 7</a>
                    
                  </div>
                  <div class="clear"></div>
                </section>
              </div>

              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="epcl_about-2" class="widget widget_epcl_about underline-effect">
                  <h4 class="widget-title title white bordered">å…³äºæˆ‘</h4>
                  <div class="avatar">
                    <a href="https://github.com/Yanoona" class="translate-effect thumb"><span class="fullimage cover" style="background-image: url(https://Yanoona.github.io/images/avatar.png);"></span></a>
                  </div>
                  <div class="info">
                    <h4 class="title small author-name gradient-effect no-margin"><a href="https://github.com/Yanoona">å§¿åŠ¿ç¾å¦‚ç”»( *ãƒ»Ï‰ãƒ»)âœ„â•°ã²â•¯</a></h4>
                    <p class="founder">å¤§çˆ·ä¸è¿›æ¥çœ‹çœ‹å—ï¼Ÿè¿™é‡Œæœ‰å¥½åº·çš„å“¦~~~</p>
                    <div class="social">
                      
                        
                            <a href="https://github.com/Yanoona" class="translate-effect" target="_blank"><i class="fa fa-github"></i></a>
                        
                      
                        
                      
                        
                      
                        
                      
                        
                      
                    </div>
                  </div>
                  <div class="clear"></div>
                  </section>
              </div>

            </div>
            <div class="clear"></div>
        </div>

        <p class="published border-effect">
          Â©2020 å…± 4 ç¯‡æ–‡ç« 
        </p>
        
        <a href="javascript:void(0)" id="back-to-top" class="epcl-button dark" style="display:none">
          <i class="fa fa-arrow"></i>
        </a>
    </footer>
    <div class="clear"></div>

<script type="text/javascript">
    jQuery(document).ready(function ($) {
        $("photos img").each(function () {
            var _a = $("<a></a>").attr("href", this.src);
            $(this).wrap("<div class='photo'></div>").wrap(_a);
        })
        $("figure img").each(function () {
            var _b = $("<a></a>").attr("href", this.src);
            $(this).wrap(_b);
        })
        isImgLoad(function () {
            var photos = document.querySelector('photos');
            if (photos) {
                waterfall(photos);
            }
            $(window).resize(function () {
                if (photos) {
                    waterfall(photos);
                }
            });
        });
        var t_img;
        var isLoad = true;

        function isImgLoad(callback) {
            $('photos img').each(function () {
                if (this.height === 0) {
                    isLoad = false;
                    return false;
                }
            });
            if (isLoad) {
                clearTimeout(t_img);
                callback();
            } else {
                isLoad = true;
                t_img = setTimeout(function () {
                    isImgLoad(callback);
                }, 500);
            }
        }
    });
</script>

</div>
<!-- end: #wrapper -->
</body>
</html>
